# あなたの未来地図 - 技術仕様書

## バージョン: 2.0.0
## 最終更新: 2025年12月31日
## ブランド名: よく当たる行動理論

---

## 1. プロジェクト概要

### 1.1 ツール名
**あなたの未来地図**

### 1.2 ブランド
**よく当たる行動理論**

### 1.3 コンセプト
独自の行動理論に基づいたキャリア診断ツール。
本質タイプ診断と行動特性分析を融合し、キャリアアドバイスまで提供する。

### 1.4 主要機能
- 生年月日による本質タイプ診断（12タイプ + 10主星）
- 28問の設問による行動特性分析（6カテゴリ + 4軸特性タイプ診断）
- 診断結果のレーダーチャート表示
- **キャリアアドバイス**（得意領域・苦手領域・理想の環境）
- **相性診断**（上司・部下との相性）
- **SNSシェア機能**（X・Instagram）

---

## 2. 技術スタック

### 2.1 フロントエンド
- **フレームワーク**: React 19.x
- **ルーティング**: React Router DOM 7.x
- **チャート**: Chart.js 4.x + react-chartjs-2
- **ビルドツール**: Vite 7.x
- **スタイリング**: CSS（カスタム）

### 2.2 バックエンド
- **ランタイム**: Node.js
- **フレームワーク**: Express 5.x
- **CORS**: cors パッケージ

### 2.3 データストレージ
- In-memory Map（開発用）
- 24時間後自動削除機能

---

## 3. ファイル構成

```
mirai-map/
├── package.json              # プロジェクト設定
├── vite.config.js            # Vite設定
├── index.html                # HTMLエントリーポイント
├── SPECIFICATION.md          # 本仕様書
│
├── server/
│   └── index.js              # Express APIサーバー
│
├── src/
│   ├── main.jsx              # Reactエントリーポイント
│   ├── App.jsx               # メインアプリケーション
│   ├── App.css               # アプリケーションスタイル
│   ├── index.css             # グローバルスタイル
│   │
│   ├── data/
│   │   ├── questions.js      # 28問の質問データ
│   │   └── careerDatabase.js # キャリアデータベース（NEW）
│   │
│   ├── utils/
│   │   ├── animalFortune.js  # 本質タイプ診断ロジック
│   │   ├── sanmeigaku.js     # 主星診断ロジック
│   │   └── scoreCalculator.js # スコア計算ロジック
│   │
│   └── pages/
│       ├── LandingPage.jsx   # ランディングページ
│       ├── InputPage.jsx     # 基本情報入力ページ
│       ├── DiagnosisPage.jsx # 診断ページ（28問）
│       ├── LoadingPage.jsx   # ローディングページ
│       └── ResultPage.jsx    # 結果表示ページ（4タブ構成）
│
└── dist/                     # ビルド出力
```

---

## 4. 診断ロジック

### 4.1 本質タイプ診断（animalFortune.js）

#### アルゴリズム
1. 生年月日から通算日数を計算（基準日: 1900年1月31日）
2. 60で割った余りから60干支インデックスを算出
3. 干支インデックスを12タイプにマッピング

#### 12本質タイプ
| タイプ | グループ | 特徴 |
|--------|----------|------|
| 猿 | 地球 | 落ち着きのある楽天家 |
| チータ | 地球 | 超ポジティブな挑戦者 |
| ライオン | 地球 | 情熱的なリーダー |
| トラ | 月 | 正義感の強い王者 |
| コアラ | 月 | のんびりマイペース |
| ゾウ | 月 | 努力家の平和主義者 |
| ペガサス | 太陽 | 自由奔放な天才肌 |
| 狼 | 太陽 | 一匹狼の実力者 |
| こじか | 太陽 | 甘え上手な警戒心の持ち主 |
| 黒ひょう | 月 | プライド高き感情豊か |
| ひつじ | 地球 | さみしがり屋の世話好き |
| たぬき | 地球 | 人たらしの社交家 |

### 4.2 主星診断（sanmeigaku.js）

#### 十大主星
| 星名 | キーワード | キャリアテーマ |
|------|------------|----------------|
| 貫索星 | 守り・自立 | 専門性を極める道 |
| 石門星 | 和合・協調 | 人をつなぐ道 |
| 鳳閣星 | 遊び・楽観 | 楽しさを創造する道 |
| 調舒星 | 孤高・芸術 | 感性を表現する道 |
| 禄存星 | 奉仕・愛情 | 人に尽くす道 |
| 司禄星 | 蓄積・堅実 | 着実に積み上げる道 |
| 車騎星 | 行動・攻撃 | 行動で切り拓く道 |
| 牽牛星 | 名誉・品格 | 組織を率いる道 |
| 龍高星 | 改革・創造 | 革新を起こす道 |
| 玉堂星 | 習得・伝統 | 知識を継承する道 |

### 4.3 行動特性分析（scoreCalculator.js）

#### 6カテゴリ（Q01-Q24）
| カテゴリ | 質問番号 | プラス傾向 | マイナス傾向 |
|----------|----------|------------|--------------|
| 行動実行スタイル | Q01-Q04 | 慎重・計画型 | 直感・行動型 |
| 対人コミュニケーション | Q05-Q08 | 協調・共感型 | 独立・論理型 |
| 学習成長スタイル | Q09-Q12 | 理論・体系型 | 実践・経験型 |
| モチベーション源泉 | Q13-Q16 | 協調・関係型 | 達成・成果型 |
| 感情ストレス管理 | Q17-Q20 | 内省・抑制型 | 表出・行動型 |
| 意思決定リーダーシップ | Q21-Q24 | 合意形成・協調型 | 主導・決断型 |

#### 4軸特性タイプ（Q25-Q28）
| 軸 | 質問 | プラス | マイナス |
|----|------|--------|----------|
| EI | Q25 | I（内向型） | E（外向型） |
| SN | Q26 | S（感覚型） | N（直感型） |
| TF | Q27 | T（思考型） | F（感情型） |
| JP | Q28 | J（計画型） | P（知覚型） |

---

## 5. キャリアデータベース（careerDatabase.js）

### 5.1 タイプ別キャリアデータ構造

```javascript
{
  strengths: {
    title: '得意な領域',
    items: ['項目1', '項目2', ...]
  },
  weaknesses: {
    title: '注意が必要な領域',
    items: ['項目1', '項目2', ...],
    advice: 'アドバイス文'
  },
  idealEnvironment: {
    title: '理想の職場環境',
    items: ['項目1', '項目2', ...]
  },
  compatibleBoss: {
    title: '相性の良い上司',
    types: ['タイプ1', 'タイプ2'],
    description: '説明文'
  },
  compatibleSubordinate: {
    title: '相性の良い部下',
    types: ['タイプ1', 'タイプ2'],
    description: '説明文'
  },
  avoidTypes: {
    title: '相性に注意が必要なタイプ',
    types: ['タイプ1', 'タイプ2'],
    description: '説明文'
  }
}
```

### 5.2 16特性タイプ別キャリアデータ

```javascript
{
  nickname: 'タイプのニックネーム',
  careerStrengths: ['強み1', '強み2', ...],
  idealCareers: ['職種1', '職種2', ...],
  workAdvice: 'アドバイス文'
}
```

---

## 6. 結果ページ（4タブ構成）

### 6.1 概要タブ
- 本質タイプ（12タイプ）
- 主星（10主星）
- 行動特性レーダーチャート
- 特性タイプ（16タイプ）

### 6.2 強み・注意点タブ
- 得意な領域（リスト）
- 注意が必要な領域（リスト + アドバイス）
- 特性タイプの強み（タグ表示）

### 6.3 キャリアタブ
- 理想の職場環境
- キャリアテーマ
- 適性のある職種（タグ表示）
- おすすめのキャリア

### 6.4 相性タブ
- 相性の良い上司タイプ
- 相性の良い部下タイプ
- 相性に注意が必要なタイプ

---

## 7. SNSシェア機能

### 7.1 X（Twitter）シェア
- Intent URL経由でツイート画面を開く
- ハッシュタグ: #あなたの未来地図 #よく当たる行動理論 #キャリア診断

### 7.2 Instagramシェア
- テキストをクリップボードにコピー
- ユーザーがストーリーズ/フィードに貼り付け

### 7.3 シェアテキスト形式
```
【よく当たる行動理論】あなたの未来地図で診断しました！

🎯 本質タイプ: [タイプ名]
⭐ 主星: [主星名]
🧠 特性タイプ: [XXXX]

あなたも診断してみませんか？
#あなたの未来地図 #よく当たる行動理論 #キャリア診断
```

---

## 8. API仕様

### 8.1 エンドポイント

| メソッド | パス | 説明 |
|----------|------|------|
| POST | /api/diagnosis | 診断結果を保存 |
| GET | /api/diagnosis/:id | 診断結果を取得 |
| DELETE | /api/diagnosis/:id | 診断結果を削除 |
| GET | /api/stats | 統計情報取得 |
| GET | /api/health | ヘルスチェック |

---

## 9. UI/UXデザイン

### 9.1 カラーパレット
```css
--primary-color: #6366f1;    /* インディゴ */
--primary-dark: #4f46e5;
--secondary-color: #ec4899;  /* ピンク */
--accent-color: #f59e0b;     /* アンバー */
--text-color: #1f2937;
--text-light: #6b7280;
--bg-color: #f9fafb;
--success-color: #10b981;
--error-color: #ef4444;
```

### 9.2 グラデーション背景
```css
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
```

### 9.3 フォント
- Noto Sans JP（Google Fonts）
- ウェイト: 300, 400, 500, 700

### 9.4 ページフロー
1. ランディングページ（ブランド表示 + コンセプト説明）
2. 基本情報入力（氏名・生年月日）
3. 診断ページ（28問、プログレスバー付き）
4. ローディング（アニメーション）
5. 結果ページ（4タブ構成 + SNSシェア）

---

## 10. コマンド

```bash
# 開発サーバー起動
cd mirai-map && npm run dev

# 本番ビルド
cd mirai-map && npm run build

# APIサーバー起動
cd mirai-map && npm run server
```

---

## 11. 今後の拡張予定

- [ ] PDF出力機能
- [ ] 他者への回答依頼（サーベイ機能）
- [ ] チーム診断機能
- [ ] 診断履歴機能
- [ ] OGP画像生成（SNSシェア用）
